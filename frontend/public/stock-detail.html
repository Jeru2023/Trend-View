<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-i18n="pageTitle">Trend View - Stock Detail</title>
    <link rel="stylesheet" href="styles.css?v=20261112" />
    <script>
      window.API_BASE_URL = window.API_BASE_URL || "http://localhost:8000";
    </script>
  </head>
  <body data-active-nav="market-intelligence">
    <div class="layout">
      <div data-sidebar-container></div>

      <main class="content detail-content">
        <header class="content__header detail-header">
          <div class="detail-header__info">
            <a class="detail-back-link" href="index.html">
              <svg
                class="detail-back-link__icon"
                viewBox="0 0 24 24"
                aria-hidden="true"
                focusable="false"
              >
                <path d="M15.75 4.5a.75.75 0 0 1 0 1.06L10.31 11l5.44 5.44a.75.75 0 1 1-1.06 1.06l-6-6a.75.75 0 0 1 0-1.06l6-6a.75.75 0 0 1 1.06 0z" />
              </svg>
              <span class="sr-only" data-i18n="back">Back</span>
            </a>
            <div class="detail-title-group">
              <div class="detail-title-wrapper">
                <h1 class="detail-title" id="detail-title"></h1>
                <div class="detail-title-tags">
                  <a
                    id="detail-link-xueqiu"
                    class="detail-title-tag hidden"
                    href="#"
                    target="_blank"
                    rel="noopener noreferrer"
                  >
                    雪球
                  </a>
                  <a
                    id="detail-link-eastmoney"
                    class="detail-title-tag hidden"
                    href="#"
                    target="_blank"
                    rel="noopener noreferrer"
                  >
                    东方财富
                  </a>
                </div>
              </div>
              <button
                class="favorite-toggle"
                id="favorite-toggle"
                type="button"
                aria-pressed="false"
                title=""
              >
                <span class="sr-only" data-i18n="favoriteToggleLabelAdd">Add to watchlist</span>
                <svg
                  class="favorite-toggle__icon"
                  viewBox="0 0 24 24"
                  aria-hidden="true"
                  focusable="false"
                >
                  <path d="M12 21.35 10.55 20.03C5.4 15.36 2 12.28 2 8.5 2 6 4 4 6.5 4c1.74 0 3.41 1.01 4.07 2.57C11.23 5.01 12.9 4 14.64 4 17.14 4 19.14 6 19.14 8.5c0 3.78-3.4 6.86-8.55 11.54z" />
                </svg>
              </button>
            </div>
            <p class="detail-subtitle" id="detail-subtitle"></p>
          </div>
          <div class="detail-header__actions">
            <div class="detail-search" id="detail-search">
              <input
                id="detail-search-input"
                type="search"
                class="search-box detail-search__input"
                placeholder="Search stocks by code or name"
                data-placeholder-en="Search stocks by code or name"
                data-placeholder-zh="按代码或名称搜索股票"
                aria-label="Search stocks"
                aria-autocomplete="list"
                aria-controls="detail-search-results"
                aria-expanded="false"
                autocomplete="off"
                spellcheck="false"
                enterkeyhint="search"
              />
              <div
                class="detail-search__results hidden"
                id="detail-search-results"
                role="listbox"
              ></div>
            </div>
            <div class="language-switcher detail-header__language">
              <button class="lang-btn" data-lang="en" data-i18n="langEn">EN</button>
              <button class="lang-btn" data-lang="zh" data-i18n="langZh">中文</button>
            </div>
          </div>
        </header>

        <section class="detail-status" id="detail-status" data-i18n="loading">Loading...</section>

        <section class="detail-hero hidden" id="detail-hero">
          <div class="detail-hero__primary">
            <div>
              <p class="detail-hero__label" data-i18n="labelLastPrice">Last Price</p>
              <p class="detail-hero__price" id="hero-price">--</p>
            </div>
            <div class="detail-hero__change" id="hero-change">--</div>
          </div>
          <div class="detail-hero__meta">
            <span id="hero-meta">--</span>
            <span class="detail-hero__updated" id="hero-updated"></span>
          </div>
          <div class="detail-hero__stats">
            <div class="detail-hero__stat">
              <span class="detail-hero__stat-label" data-i18n="labelMarketCap">Market Cap</span>
              <span class="detail-hero__stat-value" id="hero-market-cap">--</span>
            </div>
            <div class="detail-hero__stat">
              <span class="detail-hero__stat-label" data-i18n="labelVolume">Volume</span>
              <span class="detail-hero__stat-value" id="hero-volume">--</span>
            </div>
            <div class="detail-hero__stat">
              <span class="detail-hero__stat-label" data-i18n="labelPe">PE Ratio</span>
              <span class="detail-hero__stat-value" id="hero-pe">--</span>
            </div>
            <div class="detail-hero__stat">
              <span class="detail-hero__stat-label" data-i18n="labelTurnover">Turnover</span>
              <span class="detail-hero__stat-value" id="hero-turnover">--</span>
            </div>
          </div>
        </section>

        <div class="detail-tabs" role="tablist">
          <button class="detail-tabs__btn is-active" type="button" data-tab="overview">
            <span data-i18n="tabOverview">Overview</span>
          </button>
          <button class="detail-tabs__btn" type="button" data-tab="news">
            <span data-i18n="tabNews">News</span>
          </button>
          <button class="detail-tabs__btn" type="button" data-tab="volume">
            <span data-i18n="tabVolume">Volume Analysis</span>
          </button>
          <button class="detail-tabs__btn" type="button" data-tab="analysis">
            <span data-i18n="tabIntegrated">Integrated</span>
          </button>
          <button class="detail-tabs__btn" type="button" data-tab="notes">
            <span data-i18n="tabNotes">Notes</span>
          </button>
        </div>

        <div class="detail-tab-panels">
          <section class="detail-tab-panel is-active" data-tab-panel="overview">
            <section class="detail-grid hidden" id="detail-grid">
              <article class="detail-card detail-card--wide performance-card hidden" id="performance-card">
                <header class="detail-card__header">
                  <h2 data-i18n="performanceCardTitle">Performance Highlights</h2>
                  <p class="detail-card__subtitle" data-i18n="performanceCardSubtitle">
                    Latest express and forecast snapshots.
                  </p>
                </header>
                <div class="performance-highlights">
                  <article class="performance-tile" id="performance-express-tile"></article>
                  <article class="performance-tile" id="performance-forecast-tile"></article>
                </div>
              </article>

              <article class="detail-card hidden" id="individual-fund-flow-card">
                <header class="detail-card__header">
                  <h2 data-i18n="individualFundFlowCardTitle">Individual Fund Flow</h2>
                </header>
                <div class="individual-fund-flow-list" id="individual-fund-flow-list"></div>
              </article>

              <article class="detail-card detail-card--wide hidden" id="big-deal-card">
                <header class="detail-card__header">
                  <h2 data-i18n="bigDealCardTitle">Large Order Tracker</h2>
                  <p class="detail-card__subtitle" data-i18n="bigDealCardSubtitle">
                    Most recent big-deal transactions.
                  </p>
                </header>
                <div class="big-deal-list" id="big-deal-list"></div>
              </article>

              <article class="detail-card detail-card--wide" id="candlestick-card">
                <header class="detail-card__header">
                  <h2 data-i18n="candlestickTitle">Daily Candlestick</h2>
                  <p class="detail-card__subtitle" data-i18n="candlestickSubtitle">
                    Latest trading range trend.
                  </p>
                </header>
                <div class="candlestick-chart" id="candlestick-chart"></div>
                <div class="chart-empty hidden" id="candlestick-empty" data-i18n="noCandlestickData">
                  Price history is not available.
                </div>
              </article>

              <div class="business-section hidden" id="business-composition-section">
                <article class="detail-card detail-card--elevated hidden" id="main-business-card">
                  <header class="detail-card__header">
                    <h2 data-i18n="mainBusinessCardTitle">Business Overview</h2>
                    <p class="detail-card__subtitle" data-i18n="mainBusinessCardSubtitle">
                      Tonghuashun main business snapshot.
                    </p>
                  </header>
                  <div class="business-info" id="main-business-list"></div>
                  <p class="detail-empty hidden" id="main-business-empty" data-i18n="mainBusinessEmpty">
                    Main business details are not available yet.
                  </p>
                </article>

                <article class="detail-card detail-card--elevated hidden" id="main-composition-card">
                  <header class="detail-card__header">
                    <h2 data-i18n="mainCompositionCardTitle">Revenue Composition</h2>
                    <p class="detail-card__subtitle" id="main-composition-report-date"></p>
                  </header>
                  <div class="composition-groups" id="main-composition-groups"></div>
                  <p class="detail-empty hidden" id="main-composition-empty" data-i18n="mainCompositionEmpty">
                    Main composition details are not available yet.
                  </p>
                </article>
              </div>

              <article class="detail-card detail-card--wide" id="stats-card">
                <header class="detail-card__header">
                  <h2 data-i18n="tradingStatsTitle">Trading Stats</h2>
                </header>
                <div class="detail-list" id="stats-list"></div>
              </article>

              <div class="financial-summary-row">
                <article class="detail-card" id="fundamentals-card">
                  <header class="detail-card__header">
                    <h2 data-i18n="financialStatsTitle">Financial Stats</h2>
                  </header>
                  <div class="detail-list" id="fundamentals-list"></div>
                </article>
                <article class="detail-card" id="financial-card">
                  <header class="detail-card__header">
                    <h2 data-i18n="financialDataTitle">Financial Summary</h2>
                  </header>
                  <div class="detail-list" id="financial-list"></div>
                </article>
              </div>
            </section>
          </section>

          <section class="detail-tab-panel" data-tab-panel="news">
            <article class="detail-card detail-card--wide">
              <header class="detail-card__header detail-card__header--row">
                <div>
                  <h2 data-i18n="newsTabTitle">Latest News</h2>
                  <p class="detail-card__subtitle" data-i18n="newsTabSubtitle">
                    Tagged headlines and flash updates related to this stock.
                  </p>
                </div>
                <div class="detail-card__actions">
                  <button class="secondary-btn" type="button" id="stock-news-sync" data-i18n="newsSyncButton">
                    Sync Latest
                  </button>
                  <button class="secondary-btn" id="stock-news-refresh" type="button" data-i18n="refreshButton">
                    Refresh
                  </button>
                </div>
              </header>
              <div class="detail-news" id="stock-news-list"></div>
              <p class="detail-empty hidden" id="stock-news-empty" data-i18n="newsEmpty">
                No recent headlines matched this stock.
              </p>
            </article>
          </section>

          <section class="detail-tab-panel" data-tab-panel="volume">
            <article class="detail-card detail-card--wide">
              <header class="detail-card__header detail-card__header--row">
                <div>
                  <h2 data-i18n="volumeTabTitle">Volume / Price Reasoning</h2>
                  <p class="detail-card__subtitle" data-i18n="volumeTabSubtitle">
                    Wyckoff-style analysis powered by DeepSeek Reasoner.
                  </p>
                </div>
                <div class="detail-card__actions">
                  <button
                    class="secondary-btn"
                    type="button"
                    id="stock-volume-history-toggle"
                    data-i18n="volumeHistoryButton"
                  >
                    History
                  </button>
                  <button class="primary-btn" type="button" id="stock-volume-run" data-i18n="runVolumeButton">
                    Run Analysis
                  </button>
                </div>
              </header>
              <div class="detail-volume-output" id="stock-volume-output"></div>
              <p class="detail-empty hidden" id="stock-volume-empty" data-i18n="volumeEmpty">
                Select a stock and run the analysis to generate fresh insights.
              </p>
              <div class="detail-volume-meta" id="stock-volume-meta"></div>
              <div class="detail-volume-history" id="stock-volume-history" hidden>
                <div class="detail-volume-history__header">
                  <div>
                    <h3 data-i18n="volumeHistoryTitle">Reasoning History</h3>
                  </div>
                  <button class="link-btn" type="button" id="stock-volume-history-close" data-i18n="volumeHistoryClose">
                    Close
                  </button>
                </div>
                <div class="detail-volume-history__list" id="stock-volume-history-list" data-empty="1"></div>
              </div>
            </article>
          </section>

          <section class="detail-tab-panel" data-tab-panel="analysis">
            <article class="detail-card detail-card--wide" id="integrated-card">
              <header class="detail-card__header detail-card__header--row">
                <div>
                  <h2 data-i18n="integratedTabTitle">Integrated Analysis</h2>
                  <p class="detail-card__subtitle" data-i18n="integratedTabSubtitle">
                    DeepSeek reasoning blended with overview metrics, fund flow, news, and volume signals.
                  </p>
                  <p class="detail-integrated-meta" id="integrated-meta"></p>
                </div>
                <div class="detail-card__actions">
                  <button
                    class="secondary-btn"
                    type="button"
                    id="stock-integrated-history-toggle"
                    data-i18n="integratedHistoryButton"
                  >
                    History
                  </button>
                  <button class="primary-btn" type="button" id="stock-integrated-run" data-i18n="integratedRunButton">
                    Run Integrated Analysis
                  </button>
                </div>
              </header>
              <div class="integrated-summary" id="integrated-summary"></div>
              <p class="detail-empty hidden" id="integrated-empty" data-i18n="integratedEmpty">
                Generate the integrated analysis to review DeepSeek recommendations.
              </p>
              <p class="detail-error hidden" id="integrated-error"></p>
              <div class="detail-volume-history" id="stock-integrated-history" hidden>
                <div class="detail-volume-history__header">
                  <div>
                    <h3 data-i18n="integratedHistoryTitle">Integrated Analysis History</h3>
                  </div>
                  <button
                    class="link-btn"
                    type="button"
                    id="stock-integrated-history-close"
                    data-i18n="integratedHistoryClose"
                  >
                    Close
                  </button>
                </div>
                <div class="detail-volume-history__list" id="stock-integrated-history-list" data-empty="1"></div>
              </div>
              </article>
            </section>

          <section class="detail-tab-panel" data-tab-panel="notes">
            <article class="detail-card detail-card--wide" id="stock-notes-card">
              <header class="detail-card__header">
                <h2 data-i18n="stockNotesTitle">Personal Notes</h2>
                <p class="detail-card__subtitle" data-i18n="stockNotesSubtitle">
                  Keep a private log for this stock.
                </p>
              </header>
              <form class="stock-notes__form" id="stock-notes-form">
                <label class="sr-only" for="stock-notes-input" data-i18n="stockNotesLabel">Note</label>
                <textarea
                  class="stock-notes__textarea"
                  id="stock-notes-input"
                  rows="3"
                  maxlength="1000"
                  data-placeholder-en="Add a quick note..."
                  data-placeholder-zh="记录你的想法..."
                  required
                ></textarea>
                <div class="stock-notes__form-actions">
                  <span class="stock-notes__error hidden" id="stock-notes-error"></span>
                  <button type="submit" class="btn btn--primary" id="stock-notes-submit" data-i18n="stockNotesSubmit">
                    Save Note
                  </button>
                </div>
              </form>
              <p class="stock-notes__status hidden" id="stock-notes-status" data-i18n="stockNotesLoading">
                Loading notes...
              </p>
              <p class="stock-notes__empty hidden" id="stock-notes-empty" data-i18n="stockNotesEmpty">
                No notes yet.
              </p>
              <div class="stock-notes__history" id="stock-notes-history"></div>
            </article>
          </section>
        </div>
      </main>
    </div>

    <script src="i18n.js?v=20270421"></script>
    <script src="sidebar.js?v=20270438"></script>
    <script type="module" src="stock-detail.js?v=20261112"></script>
  </body>
</html>
